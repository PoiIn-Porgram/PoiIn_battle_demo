# 程序框架梳理
    此乃本游戏程序的总框架，所有人都要在这里说明自己所负责的游戏层的核心内容
## UI层  &nbsp;&nbsp;&nbsp;&nbsp; @柯克兰 &nbsp; @灼华
- 负责提供玩家操作界面和监听玩家行为，并将行为指令提供给规则层
## 规则层 &nbsp;&nbsp;&nbsp;&nbsp;  @啊哈 &nbsp; @暴走の扎克
- 负责检查玩家行为的合法性，计算玩家造成的伤害，根据玩家的行为记录为玩家触发事件等
## 实例层 &nbsp;&nbsp;&nbsp;&nbsp;  @okk &nbsp; @阿昆
- 负责为规则层提供棋盘行为的接口，导入来自美术组的特效
- chracterMove(人物移动)
    - 接口作用：调用时，使人物在棋盘上移动
    - 调用方法，详见```testController.cs```
    ```C#
    //_chracterMove = FindObjectOfType<chracterMove>();预载
        if (GUILayout.Button("W"))
        {
           _chracterMove.chracterMoveTo(chracterMove.direction.front);
        }
        if (GUILayout.Button("A"))
        {
            _chracterMove.chracterMoveTo(chracterMove.direction.left);
        }
        if (GUILayout.Button("S"))
        {
            _chracterMove.chracterMoveTo(chracterMove.direction.back);
        }
        if (GUILayout.Button("D"))
        {
            _chracterMove.chracterMoveTo(chracterMove.direction.right);
        }
    ```
## 系统层 &nbsp;&nbsp;&nbsp;&nbsp; @连续朋友      
- 负责游戏引擎和游戏底层数据的交互，为策划组提供虚拟指令集和配置文件接口，维护解释器，并为其他层提供封装成指定结构的数据
- map(地图)
  - 文件位于 PoiIn_battle-demo\Assets\testMap.json
  - "testMap"数组记录了砖块的虚拟位置和种类。 
    - 虚拟位置：即假设第一块砖块的位置为(0,0,0),每块砖块都为体积为1m^3的正方体时所得到的的砖块空间位置，如此可将所有砖块的位置整数化处理，便于后续的AI和规则层调用
    - 种类：将美术组提供的砖块编号后，以id的形式调用，id参考cubes文件夹中的cubesId.txt文件
    - 相关脚本：
        - ```chracter2Dposition.cs```<-仅封装了一个将虚拟位置转换为引擎实际位置的一个函数
        - ```loadMap.cs```<-提供json文件的解释器
        - ```testMap.cs``` 
- chracterCard(人物卡)
    - 文件位于 PoiIn_battle-demo\Assets\chracter
    - 用于将数据和引擎编码分离，提供人物的属性值和法术信息
        - 属性值：已经封装为了一个公共字典类型：
        - 法术列表：以封装为了一个公共链表，链表由spell结构体组成
        ```C#
        public Dictionary<string, int> status;
        //比如status["HP"]可取得HP值

        public struct spells
        {
            public string spellName;
            //法术的名称
            public string description;
            //法术的描述
            public Dictionary<string, int> Launching_Conditions;
            //法术发动的条件，后续会加入法术发动时造成的伤害加成和造成的特殊状态
        }
        //@啊哈@暴走の扎克
        public List<spells> spelleList = new List<spells>();
        //C#已经封装好的链表
        ```
        - 相关脚本:
            - ```chracterCard.cs```
            - ```castSpell.cs```
- sinario(对话脚本)
    - 文件位于PoiIn_battle-demo\Assets\testSinario
    - 规则参考 Gal脚本格式.md
    - 相关脚本：
        - ```textFileLoader.cs``` 
        - ```sinarioController.cs```
    - 脚手架：
    ```C#
    //_sinarioController = FindObjectOfType<sinarioController>();
        if (GUILayout.Button("nextSinario"))
        {
            _sinarioController.nextSinario();
        }
    ```
