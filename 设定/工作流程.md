# 破隐程序组公开文档

### 1.开发工作流程
- 同步远端仓库(非常重要,减少引起合并问题的可能性)
- 根据程序组QQ群中的需求或者根据策划组的需求进行程序编写
- 程序编写完成后,进入Unity引擎进行测试(如果报错或者无法编译,需要解决问题后再进行下一步操作)
- 将编写好的程序打上注释,如果有接口的话,在```testController.cs```脚本里登记
- 将本次修改的内容大致commit,push到远端仓库(勿忘)

### 2.游戏引擎循环
#### 1.  进入循环： 游戏开始，初始化人物，数据进入缓存区
#### 2.  解析器解析人物卡
#### 3.  监听玩家行为，并作出反馈(目前仅战斗模式)
      3.1 玩家移动,调用UI逻辑等行为监听
      3.2 玩家普通攻击，判断合法性，读取普通攻击附加效果(如果附加效果中包含接收行为类的函数，则接受玩家行为)并扣除对应属性值，建立(取消)对应的状态
      3.3 玩家使用技能，判断合法性，读取技能对应的破隐码(如果附加效果中包含接收行为类的函数，则接受玩家行为)，并扣除相应的属性值，建立(取消)对应的状态
      3.4 玩家使用道具，判断合法性，读取道具有关的破隐码(如果附加效果中包含接收行为类的函数，则接受玩家行为)，并扣除相应的属性值，建立(取消)对应的状态
####  4.  进入敌人AI回合
####  5.  再次进入循环
        5.1 玩家和敌人都存活，回到循环第2步
        5.2 玩家存活，敌人死亡，战斗结束
        5.3 敌人存活，玩家死亡，战斗结束

### 3.程序框架梳理
#### UI层  &nbsp;&nbsp;&nbsp;&nbsp; @柯克兰 &nbsp; @灼华 &nbsp; @amidu
- 负责提供玩家操作界面和监听玩家行为，并将行为指令提供给规则层
- 调用关系声明:
    - UI层给予玩家操作指示，规则层判断玩家的操作合法性和判断玩家操作的后果，两个游戏层实质上是高度耦合的。在程序组内部会议中，模拟了两个层相互调用的模式——玩家操作时，由UI层调用规则层的函数，规则层的函数返回UI层需要的新参数。敌方(敌人AI)行动时，由规则层调用UI层变量，将数值变化呈现给玩家
#### 规则层 &nbsp;&nbsp;&nbsp;&nbsp;  @啊哈 &nbsp; @暴走の扎克
- 负责检查玩家行为的合法性，计算玩家造成的伤害，根据玩家的行为记录为玩家触发事件等,负责搭建破隐代码的基础函数组

#### 系统层 &nbsp;&nbsp;&nbsp;&nbsp; @连续朋友      
- 负责游戏引擎和游戏底层数据的交互，为策划组提供虚拟指令集和配置文件接口，维护解释器，并为其他层提供封装成指定结构的数据,制作解析破隐码的解析器

